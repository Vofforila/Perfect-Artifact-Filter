import{r as y,D as H,a as v,dt as k,d6 as A,d7 as L,d as a,f,b as e,am as B,T as p,bF as E,z as b,c6 as F,o as K,e as w,B as $,ax as N,p as _,c4 as P,c8 as V,O as I,u as W,cv as q,M as Q,ag as R,ah as U,N as j,as as z,aa as G,fB as J,ad as O,an as X,h as S,ai as Y,l as Z,aQ as ee}from"./index-CjAFtLKW.js";import{u as ae}from"./useTeamChar-CNxR-uVm.js";function te({optimizationTarget:t,customMultiTargets:m}){var l;const{data:i}=y.useContext(H),n=v(),d=y.useMemo(()=>k(i,t[0],n),[i,t,n]),{title:c,icon:h,action:s}=d??{},o=A(i.getDisplay(),t),{textSuffix:r,icon:g,name:x=t[0]==="custom"?(l=m[parseInt(t[1]??"")])==null?void 0:l.name:void 0}=(o&&L(o.info))??{};return a(E,{children:[a(f,{sx:{display:"flex",gap:1,alignItems:"center"},children:[h||g,e("span",{children:c}),!!s&&e(B,{color:"success",sx:{whiteSpace:"normal"},children:s})]}),e(p,{sx:{display:"flex",alignItems:"center"},children:a(B,{sx:{whiteSpace:"normal"},children:[e("strong",{children:x}),r&&a("span",{children:[" ",r]})]})})]})}function ne({teamCharId:t,showSetting:m=!1,children:i}){const{t:n}=b("loadout"),d=v(),{name:c,description:h,buildIds:s,buildTcIds:o,optConfigId:r,customMultiTargets:g}=d.teamChars.get(t),{optimizationTarget:x}=F(r);return a(I,{sx:{display:"flex",flexDirection:"column",gap:1,width:"100%"},children:[a(f,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e(K,{}),e(p,{variant:"h6",children:c}),!!h&&e($,{title:e(p,{children:h}),children:e(w,{})}),m&&e(N,{sx:{ml:"auto"}})]}),a(f,{sx:{display:"flex",gap:1,justifyContent:"space-between"},children:[a(f,{sx:{display:"flex",justifyItems:"center",gap:1},children:[e(_,{}),a(p,{children:[n("loadoutHeader.builds"),e("strong",{children:s.length})]})]}),a(f,{sx:{display:"flex",justifyItems:"center",gap:1},children:[e(_,{}),a(p,{children:[n("loadoutHeader.tcBuilds"),e("strong",{children:o.length})]})]}),a(f,{sx:{display:"flex",justifyItems:"center",gap:1},children:[e(P,{}),a(p,{children:[n("loadoutHeader.mltTargets"),e("strong",{children:g.length})]})]})]}),x&&a(p,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e(V,{}),e(f,{children:n("loadoutHeader.optTarget")}),e(te,{customMultiTargets:g,optimizationTarget:x})]}),i]})}function oe({teamId:t,show:m,onHide:i,onDel:n}){const{t:d}=b("page_team"),c=v(),h=W(t),{name:s,description:o,loadoutData:r}=h,g=y.useMemo(()=>r.map(l=>{if(!l)return[];const{teamCharId:u}=l;return c.teams.values.filter(({loadoutData:C})=>C.find(D=>(D==null?void 0:D.teamCharId)===u))}),[c,r]),[x,T]=y.useState(()=>g.map((l,u)=>l.length===1?u:void 0).filter(q)),M=()=>{c.teams.remove(t),r.forEach((l,u)=>{!l||!x.includes(u)||c.teamChars.remove(l.teamCharId)}),n()};return e(Y,{open:m,onClose:i,children:a(S,{children:[e(Q,{title:a(f,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e(f,{children:d("teamDelModal.teamName")}),e("strong",{children:s}),o&&e($,{title:o,children:e(w,{})})]}),action:e(R,{onClick:i,children:e(U,{})})}),e(j,{}),a(I,{sx:{display:"flex",flexDirection:"column",gap:1},children:[e(z,{severity:"info",children:e(G,{t:d,i18nKey:"teamDelModal.alert",children:"Removing the team will remove: resonance buffs, and enemy configs stored in the team. Loadouts that are only in this team are also selected by default for deletion."})}),r.map((l,u)=>l?e(se,{teamCharId:l.teamCharId,selected:x.includes(u),onClick:()=>T(C=>J(C,u)),inTeams:g[u]},u):null)]}),e(j,{}),e(I,{sx:{display:"flex",justifyContent:"flex-end"},children:e(O,{color:"error",startIcon:e(X,{}),onClick:M,children:d("teamDelModal.delBtn")})})]})})}function se({teamCharId:t,selected:m,onClick:i,inTeams:n}){const{t:d}=b("page_team"),c=ae(t),{key:h}=c,s=Z(h),{target:o}=(s==null?void 0:s[h])??{},r=y.useMemo(()=>{if(!(!s||!o))return{data:o,teamData:s,compareData:void 0}},[o,s]);if(r)return e(H.Provider,{value:r,children:e(S,{bgt:"light",sx:{border:m?"2px red solid":void 0},children:e(O,{fullWidth:!0,onClick:i,variant:"outlined",color:"neutral100",sx:{p:0},children:e(ne,{teamCharId:t,children:e(ee,{color:n.length===1?"success":"warning",children:e(p,{children:n.length===1?d("teamDelModal.onlyCrrTeam"):d("teamDelModal.usingMltTeams",{count:n.length})})})})})})})}export{ne as L,te as O,oe as T};
